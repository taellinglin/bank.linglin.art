{% extends "base.html" %}
{% block content %}
    <div class="hero">
        <!-- Animated currency graphics -->
        <div class="floating-graphics">
            <div class="graphic coin-1">
                {% if current_user.is_authenticated %}
                    <img 
                        src="{{ get_user_avatar_url(current_user.username) if current_user.is_authenticated else '/default-avatar.png' }}" 
                        width="256" 
                        height="256" 
                        alt="{{ current_user.username if current_user.is_authenticated else 'User' }}"
                        style="border-radius: 50%; object-fit: cover; border: 3px solid #ffffffff; box-shadow: 0 4px 8px rgba(0,0,0,0.2);"
                    >
                {% else %}
                    <img src="{{ url_for('static', filename='images/favicon-256x256.png') }}" alt="Ling Treasury Emblem" style="border-radius: 50%; object-fit: cover; border: 3px solid #ffffffff; box-shadow: 0 4px 8px rgba(0,0,0,0.2);"></img>
                {% endif %}
            </div>
        </div>
        
        <h1>Welcome to The Ling Country Treasury<span class="chinese-text">„ÄêÁÅµÂõΩÂõΩÂ∫ì„Äë</span>{% if current_user.is_authenticated %}, {{ current_user.username }}{% endif %}</h1>
        <p>Create, collect, and trade unique digital banknotes with our community of currency enthusiasts.</p>
        {% if current_user.is_authenticated %}
            <div class="user-stats">
                <div class="user-stat">
                    <span class="user-stat-value">{{ "{:,.0f}".format(user_stats.banknotes_created) }}</span>
                    <span class="user-stat-label">Your Banknotes</span>
                </div>
                <div class="user-stat">
                    <span class="user-stat-value">${{ "{:,.0f}".format(user_stats.balance) }}</span>
                    <span class="user-stat-label">Balance</span>
                </div>

                {% if user_stats.can_generate %}
                    <div class="user-stat">
                        <a href="{{ url_for('profile', username=current_user.username) }}" class="cta-button small">Generate $</a>
                    </div>
                {% else %}
                    <div class="user-stat">
                        <span class="user-stat-value">{{ user_stats.days_until_next }} days</span>
                        <span class="user-stat-label">Until Next Generation</span>
                    </div>
                {% endif %}
            </div>
            <a href="{{ url_for('profile', username=current_user.username) }}" class="cta-button">Go to Profile</a>
        {% else %}
            <a href="{{ url_for('register') }}" class="cta-button">Get Started</a>
            <a href="{{ url_for('login') }}" class="cta-button secondary">Login</a>
        {% endif %}
    </div>

    <!-- Real Statistics section -->
    <div class="stats">
        <div class="stat">
            <div class="stat-number">{{ "{:,.0f}".format(total_banknotes) }}</div>
            <div class="stat-label">Banknotes Created</div>
        </div>
        <div class="stat">
            <div class="stat-number">{{ total_users }}</div>
            <div class="stat-label">Active Users</div>
        </div>
        <div class="stat">
            <div class="stat-number">{{ recent_activity }}</div>
            <div class="stat-label">Active This Week</div>
        </div>
        <div class="stat">
            <div class="stat-number">${{ "{:,.0f}".format(total_value) }}</div>
            <div class="stat-label">Total Value</div>
        </div>

    </div>

    <div class="features">
        <div class="feature">
            <div class="feature-icon">üñåÔ∏è</div>
            <h2>Generate Banknotes</h2>
            <p>Design and generate your own custom digital currency with our easy-to-use tools.</p>
            <!-- No link as requested -->
        </div>
        <div class="feature">
            <div class="feature-icon">üë•</div>
            <h2>Members</h2>
            <p>Join our growing community of currency enthusiasts and collectors.</p>
            <a href="{{ url_for('gallery_index') }}" class="feature-link">View Members ‚Üí</a>
        </div>
        <div class="feature">
            <div class="feature-icon">‚úÖ</div>
            <h2>Verify</h2>
            <p>Verify the authenticity of banknotes and ensure secure trading.</p>
            <a href="{{ url_for('verify_serial') }}" class="feature-link">Verify Now ‚Üí</a>
        </div>
    </div>
</div>

<style>
        /* Real Statistics styling (same as user-stats) */
.stats {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 20px 0;
}

.stat {
    text-align: center;
    padding: 15px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    min-width: 120px;
}

.stat-number {
    font-family:'Unispace';
    display: block;
    font-size: 1.8rem;
    font-weight: bold;
    color: #ff3333;
}

.stat-label {
    font-family:'Unispace';
    font-size: 0.9rem;
    color: #ccc;
}

.user-stats {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 20px 0;
}

.user-stat {
    text-align: center;
    padding: 15px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    min-width: 120px;
}

.user-stat-value {
    display: block;
    font-size: 1.8rem;
    font-weight: bold;
    color: #ff3333;
}

.user-stat-label {
    font-size: 0.9rem;
    color: #ccc;
}

.cta-button.small {
    padding: 8px 16px;
    font-size: 0.9rem;
}

.feature-link {
    display: inline-block;
    margin-top: 15px;
    color: #ff3333;
    text-decoration: none;
    font-weight: bold;
}

.feature-link:hover {
    text-decoration: underline;
}
</style>
{% endblock %}